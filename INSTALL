Setup on Arch Linux
===================

1) Clone the AUR project:

   $ cd /srv/http/
   $ git clone git://projects.archlinux.org/aur.git

2) Setup a web server with PHP and MySQL.

3) Copy conf/config.proto to conf/config and adjust the configuration.

4) Create a new MySQL database and a user and import the AUR SQL schema:

   $ mysql -uaur -p AUR </srv/http/aur/schema/aur-schema.sql

5) Clone the OpenSSH project, apply the AUR sshd patch and run `make`:

   $ cd /srv/http/aur/
   $ git clone git://anongit.mindrot.org/openssh.git
   $ cd openssh
   $ git am ../scripts/git-integration/0001-Patch-sshd-for-the-AUR.patch
   $ autoreconf
   $ ./configure
   $ make

6) Create and edit the sshd configuration:

   $ cd /srv/http/aur/
   $ umask 077
   $ mkdir .ssh/
   $ ssh-keygen -f .ssh/ssh_host_rsa_key -N '' -t rsa
   $ cp scripts/git-integration/sshd_config .ssh/

7) Create a new user and change ownership of the .ssh directory:

   # useradd -U -d /srv/http/aur -c 'AUR user' aur
   # chown aur:aur /srv/http/aur/.ssh/

8) Run the sshd as the new user.

   $ /srv/http/aur/openssh/sshd -f /srv/http/aur/.ssh/sshd_config
